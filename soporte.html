<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soporte - Buscador de Alumnos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="soporte.css">
</head>

<body>
    <div class="app-container">
        <!-- Global Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="soporte.html" class="sidebar-logo">
                    <span>üõ†Ô∏è</span> Soporte
                </a>
            </div>
            <nav class="sidebar-nav">
                <a href="index.html" class="sidebar-link">
                    <span class="sidebar-icon">‚òï</span> Cafeter√≠a
                </a>
                <a href="soporte.html" class="sidebar-link active">
                    <span class="sidebar-icon">üõ†Ô∏è</span> Soporte
                </a>
                <a href="asistencia.html" class="sidebar-link">
                    <span class="sidebar-icon">üìã</span> Asistencia
                </a>
                <a href="videos.html" class="sidebar-link">
                    <span class="sidebar-icon">üé•</span> Videos
                </a>
                <a href="reportes-asistencia.html" class="sidebar-link">
                    <span class="sidebar-icon">üìä</span> Reportes
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar" id="sidebarAvatar">AD</div>
                    <div class="user-info">
                        <span class="user-name" id="sidebarUserName">Admin</span>
                        <span class="user-role" id="sidebarUserRole">Administrador</span>
                    </div>
                </div>
                <button onclick="logout()" class="btn-logout">
                    Cerrar Sesi√≥n
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="main">
                <div class="container">
                    <h1 class="section-title">üîç Buscador de Alumnos</h1>
                    <p class="section-subtitle">Busca informaci√≥n de asistencias y evaluaciones por ID de alumno</p>

                    <!-- Barra de b√∫squeda -->
                    <div class="search-container">
                        <input type="text" id="inputBusqueda" class="search-input"
                            placeholder="Ingresa el ID o n√∫mero del alumno (ej: 5218611414359)">
                        <button id="btnBuscar" class="btn-search">Buscar</button>
                    </div>

                    <!-- Loader -->
                    <div id="loader" class="loader hidden">
                        <div class="spinner"></div>
                        <p>Buscando...</p>
                    </div>

                    <!-- Mensaje de error -->
                    <div id="mensajeError" class="mensaje-error hidden"></div>

                    <!-- Resultados -->
                    <div id="resultados" class="resultados-container hidden">
                        <!-- Informaci√≥n del alumno -->
                        <div class="alumno-card">
                            <div class="alumno-header">
                                <div class="alumno-avatar">üë§</div>
                                <div class="alumno-info">
                                    <h2 id="nombreAlumno" class="alumno-nombre">-</h2>
                                    <div class="alumno-detalles">
                                        <span class="detalle-item">
                                            <strong>ID:</strong> <span id="numeroAlumno">-</span>
                                        </span>
                                        <span class="detalle-item">
                                            <strong>üìß</strong> <span id="correoAlumno">-</span>
                                        </span>
                                        <span class="detalle-item">
                                            <strong>üïê</strong> <span id="turnoAlumno">-</span>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Estad√≠sticas r√°pidas -->
                            <div class="estadisticas-grid">
                                <div class="stat-card">
                                    <div class="stat-icon">üìä</div>
                                    <div class="stat-info">
                                        <div class="stat-label">Asistencia</div>
                                        <div class="stat-value" id="porcentajeAsistencia">-</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üìù</div>
                                    <div class="stat-info">
                                        <div class="stat-label">Promedio</div>
                                        <div class="stat-value" id="promedioCalificaciones">-</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üìÖ</div>
                                    <div class="stat-info">
                                        <div class="stat-label">Semanas</div>
                                        <div class="stat-value" id="totalSemanas">-</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">‚úÖ</div>
                                    <div class="stat-info">
                                        <div class="stat-label">Evaluaciones</div>
                                        <div class="stat-value" id="totalEvaluaciones">-</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <button class="tab-button active" data-tab="asistencias">
                                    üìÖ Asistencias
                                </button>
                                <button class="tab-button" data-tab="evaluaciones">
                                    üìù Evaluaciones
                                </button>
                            </div>

                            <!-- Tab de Asistencias -->
                            <div id="tabAsistencias" class="tab-content">
                                <div id="listaAsistencias" class="lista-asistencias">
                                    <!-- Se llenar√° din√°micamente -->
                                </div>
                            </div>

                            <!-- Tab de Evaluaciones -->
                            <div id="tabEvaluaciones" class="tab-content hidden">
                                <div id="listaEvaluaciones" class="lista-evaluaciones">
                                    <!-- Se llenar√° din√°micamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Supabase Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="auth-config.js"></script>
    <script>protectPage();</script>
    <script src="supabase-config.js"></script>
    <script src="soporte.js"></script>
</body>

</html>